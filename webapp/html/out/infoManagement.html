<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>out修改密码</title>
    <link rel="stylesheet" href="../../css/topbar.css">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/main.css">
</head>
<body>
    <div class="topbar-all"></div>
    <div class="container clearfix" >
        <div class="sidebar-wrap"></div>
        <div class="main-wrap">
            <div class="crumb-wrap">
                <div class="crumb-list"><i class="icon-font"></i><span class="crumb-name">修改密码</span></div>
            </div>
            <div class="result-wrap">
                <div class="result-content">
                    <form>
                        <table class="insert-tab" width="100%">
                            <tbody>
                                <tr>
                                    <th>原密码</th>
                                    <td>
                                        <input class="common-text required" id="oldPassword" name="oldPassword" size="50" type="password">
                                    </td>
                                </tr>
                                <tr>
                                    <th>新密码</th>
                                    <td><input class="common-text" id="newPassword" name="newPassword" size="50" type="password"></td>
                                </tr>
                                <tr>
                                    <th>确认密码</th>
                                    <td><input class="common-text" id="confirmPassword" name="confirmPassword" size="50" type="password"></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td>
                                        <input class="btn btn-primary btn6 mr10" value="提交" type="button" id="submit">
                                        <input class="btn btn6" onClick="history.go(-1)" value="返回" type="button">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="../../js/jquery2.1.1.js"></script>
    <script>
        $(document).ready(function() {

            $(".topbar-all").load("./topbar.html")
            $(".sidebar-wrap").load("./sidebar.html")

            $('#submit').click(function() {
                let data = {
                    oldPassword : $('#oldPassword').val(),
                    newPassword : $('#newPassword').val(),
                    confirmPassword : $('#confirmPassword').val()
                }
                $.ajax({
                url:'http://8.136.96.233:80/warehouse/outModifyPassword',
                dataType:'JSON',
                data : data,
                type:'POST',
                success:function(outModifyPasswordMsg){
                    if(outModifyPasswordMsg.isSuccess) {
                        alert(outModifyPasswordMsg.successMsg)
                        $(location).attr('href', './homepage.html')
                    } else {
                        alert(outModifyPasswordMsg.errorMsg)
                        $(location).attr('href', './infoManagement.html')
                    }
                },
                error:function(){
                    alert('error in request')
                }
            })
            })
            
        })
    </script>
</body>
</html>